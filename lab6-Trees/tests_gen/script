#!/bin/bash

#------------------------------------------------------------------------------
# Consts
#------------------------------------------------------------------------------
# array generator c file
gen_array=tests_gen/array_generator.c

# array generator executable
gen_array_exe=gen_array

# main tests directory name
tests_dir=./input
#------------------------------------------------------------------------------
#------------------------------------------------------------------------------



#------------------------------------------------------------------------------
# check and compile the generator
#------------------------------------------------------------------------------
if [ ! -f $gen_array_exe ]
    then gcc $gen_array -o $gen_array_exe
fi
#------------------------------------------------------------------------------
#------------------------------------------------------------------------------



#------------------------------------------------------------------------------
# check and generate main tests directory
#------------------------------------------------------------------------------
if [ ! -d $tests_dir ]
    then mkdir $tests_dir
fi
#------------------------------------------------------------------------------
#------------------------------------------------------------------------------



#------------------------------------------------------------------------------
# Get input variables:
# from              - minimal array size
# to                - maximal array size
# step              - difference between array sizes
# repeat_num        - number of times to repeat each size
#------------------------------------------------------------------------------
# from, to, step vars from terminal
from=$1
to=$2
step=$3
repeat_num=$4
#------------------------------------------------------------------------------
#------------------------------------------------------------------------------


#------------------------------------------------------------------------------
# Generate tests
#------------------------------------------------------------------------------
for (( cur_size=$from; cur_size <= $to; cur_size += $step))
do
    for (( cur_test=1; cur_test <= repeat_num; cur_test += 1))
    do
        ./$gen_array_exe $cur_size $max_elem_value >> "$tests_dir/$cur_size""_$cur_test.in"
    done
done
#------------------------------------------------------------------------------
#------------------------------------------------------------------------------